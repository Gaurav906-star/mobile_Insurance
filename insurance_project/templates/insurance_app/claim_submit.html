{% extends "./basic.html" %} {# Assuming you have a base template for navigation
and styling #} {% load crispy_forms_tags %} {# Recommended: Use
django-crispy-forms for nicer form rendering #} {% block title %}Submit New
Claim{% endblock %} {% block content %}
<div class="container mt-4">
  <h2 class="mb-4">ðŸ“‹ File a New Claim</h2>
  <p class="lead">
    Please provide details about the incident for the device covered under an
    active policy.
  </p>

  <div class="row">
    <div class="col-lg-8 offset-lg-2">
      {% if form.customer_policy.field.queryset.exists %}
      <form method="post" class="card p-4 shadow-sm">
        {% csrf_token %}

        <h5 class="card-title mb-3">Claim Details</h5>
        {{ form|crispy }}
        <small class="form-text text-danger mb-3">
          **Note:** Incident date must be in the past and within the selected
          policy's coverage dates.
        </small>

        {{ form.estimated_repair_cost|crispy }}{#=========================#}
        {{form.incident_description|crispy}}{% if form.non_field_errors %}
        {#===============================#}{#===============================#}
        {% for error in form.non_field_errors %}
        <div class="alert alert-danger mt-3">{{ error }}</div>
        {% endfor %}{#===============================#} {% endif %}

        <button type="submit" class="btn btn-danger btn-lg w-100 mt-4">
          Submit Claim
        </button>
      </form>

      {% else %}
      <div class="alert alert-info text-center p-4" role="alert">
        <h4 class="alert-heading">ðŸš« No Active Policies</h4>
        <p>
          You cannot file a claim as you do not have any currently active
          insurance policies.
        </p>
        <hr />
        <a href="{% url 'policy_list' %}" class="btn btn-info btn-lg">
          Browse Policies
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock content %}
